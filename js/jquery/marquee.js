(function(c){c.fn.kxbdSuperMarquee=function(z){var a=c.extend({},c.fn.kxbdSuperMarquee.defaults,z);return this.each(function(){function o(){var b=a.direction=="left"||a.direction=="right"?"scrollLeft":"scrollTop";if(a.isMarquee){if(a.loop>0){H+=a.scrollAmount;if(H>e*a.loop){p[b]=0;return clearInterval(j)}}var d=p[b]+(a.direction=="left"||a.direction=="up"?1:-1)*a.scrollAmount}else if(a.duration)if(q++<r){k=true;d=Math.ceil(K(q,h,I,r));if(q==r)d=g}else{clearInterval(i);k=false;return}else{d=g;clearInterval(i)}if(a.direction==
"left"||a.direction=="up"){if(d>=e)d-=e}else if(d<=0)d+=e;p[b]=d;if(a.isMarquee)j=setTimeout(o,a.scrollDelay);else if(q<r){i&&clearTimeout(i);i=setTimeout(o,a.scrollDelay)}else k=false}function A(b){k=true;var d=a.direction=="left"||a.direction=="right"?"scrollLeft":"scrollTop",s=a.direction=="left"||a.direction=="up"?1:-1;u+=s;if(b==undefined&&a.navId){l.eq(f).removeClass("navOn");f+=s;if(f>=t)f=0;else if(f<0)f=t-1;l.eq(f).addClass("navOn");u=f}var B=u<0?e:0;q=0;h=p[d];g=b!=undefined?b:B+a.distance*
u%e;I=s==1?g>h?g-h:g+e-h:g>h?g-e-h:g-h;r=a.duration;i&&clearTimeout(i);i=setTimeout(o,a.scrollDelay)}function v(){J=setInterval(function(){A()},a.time*1E3)}function C(){clearInterval(J)}function K(b,d,s,B){return-s*(b/=B)*(b-2)+d}var m=c(this),p=m.get(0),D=m.width(),L=m.height(),E=m.children(),w=E.children(),e=0,n=a.direction=="left"||a.direction=="right"?1:0,i,J,k,j,q,h,I,r,g,F,t,l,G=[],f=0,u=0,H=0;E.css(n?"width":"height",1E4);var x="<ul>";if(a.isEqual){F=w[n?"outerWidth":"outerHeight"]();t=w.length;
e=F*t;for(var y=0;y<t;y++){G.push(y*F);x+="<li>"+(y+1)+"</li>"}}else w.each(function(b){G.push(e);e+=c(this)[n?"outerWidth":"outerHeight"]();x+="<li>"+(b+1)+"</li>"});x+="</ul>";if(!(e<(n?D:L))){E.append(w.clone()).css(n?"width":"height",e*2);if(a.navId){D=c(a.navId).append(x).hover(C,v);l=c("li",D);l.each(function(b){c(this).bind(a.eventNav,function(){if(!k)if(f!=b){A(G[b]);l.eq(f).removeClass("navOn");f=b;c(this).addClass("navOn")}})});l.eq(f).addClass("navOn")}p[n?"scrollLeft":"scrollTop"]=a.direction==
"right"||a.direction=="down"?e:0;if(a.isMarquee){j=setTimeout(o,a.scrollDelay);m.hover(function(){clearInterval(j)},function(){clearInterval(j);j=setTimeout(o,a.scrollDelay)});a.controlBtn&&c.each(a.controlBtn,function(b,d){c(d).bind(a.eventA,function(){a.direction=b;a.oldAmount=a.scrollAmount;a.scrollAmount=a.newAmount}).bind(a.eventB,function(){a.scrollAmount=a.oldAmount})})}else{if(a.isAuto){v();m.hover(C,v)}a.btnGo&&c.each(a.btnGo,function(b,d){c(d).bind(a.eventGo,function(){if(k!=true){a.direction=
b;A();if(a.isAuto){C();v()}}})})}}})};c.fn.kxbdSuperMarquee.defaults={isMarquee:false,isEqual:true,loop:0,newAmount:3,eventA:"mousedown",eventB:"mouseup",isAuto:true,time:5,duration:50,eventGo:"click",direction:"left",scrollAmount:1,scrollDelay:10,eventNav:"click"};c.fn.kxbdSuperMarquee.setDefaults=function(z){c.extend(c.fn.kxbdSuperMarquee.defaults,z)}})(jQuery);
